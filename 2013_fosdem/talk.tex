\documentclass{beamer}

\usepackage{beamerthemesplit}
\usepackage{graphicx}
\usepackage{subfigure}
\usepackage{amsmath,amssymb}
\usepackage{multimedia}
\usepackage{times}
\usepackage{ulem}

\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{courier}
\usepackage{color}
\usepackage{rotating}

\newcommand{\re}{\text{Re}}
\newcommand{\im}{\text{Im}}
\newcommand{\de}{\mbox{d}}
\newcommand{\eref}[1]{(\ref{#1})}
\newcommand{\ii}{\text{i}}
\newcommand{\ee}{\text{e}}
\newcommand{\mathbi}[1]{\textbf{\em #1}}
\newcommand{\rem}[1]{}

\newcommand{\heading}[1]{\centerline{\Large #1} \vspace{0.5em}}
%\newcommand{\heading}[1]{\frametitle{\centerline{#1}}}

\newcommand{\odeint}[0]{odeint}


% Layout specification

% \usetheme{AnnArbor}
% \usetheme{Antibes}
% \usetheme{Bergen}
% \usetheme{Berkeley}
% \usetheme{Berlin}
% \usetheme{Boadilla}
% \usetheme{boxes}
% \usetheme{CambridgeUS}
% \usetheme{Copenhagen}
% \usetheme{Darmstadt}
% \usetheme{default}
% \usetheme{Dresden}
% \usetheme{Frankfurt}
% \usetheme{Goettingen}
% \usetheme{Hannover}
% \usetheme{Ilmenau}
% \usetheme{JuanLesPins}
% \usetheme{Luebeck}
% \usetheme{Madrid}
% \usetheme{Malmoe}
% \usetheme{Marburg}
% \usetheme{Montpellier}
% \usetheme{PaloAlto}
% \usetheme{Pittsburgh}
% \usetheme{Rochester}
% \usetheme{Singapore}
% \usetheme{Szeged}
\usetheme{Warsaw}

% \usecolortheme{albatross}
% \usecolortheme{beaver}
% \usecolortheme{beetle}
% \usecolortheme{crane}
% \usecolortheme{default}
% \usecolortheme{dolphin}
% \usecolortheme{dove}
% \usecolortheme{fly}
% \usecolortheme{lily}
% \usecolortheme{orchid}
% \usecolortheme{rose}
% \usecolortheme{seagull}
% \usecolortheme{seahorse}
% \usecolortheme{sidebartab}
% \usecolortheme{structure}
% \usecolortheme{whale}
% \usecolortheme{wolverine}

% \usefonttheme{default}
% \usefonttheme{professionalfonts}
% \usefonttheme{serif}
% \usefonttheme{structurebold}
% \usefonttheme{structureitalicserif}
% \usefonttheme{structuresmallcapsserif}

% \useinnertheme{circles}
% \useinnertheme{default}
% \useinnertheme{inmargin}
% \useinnertheme{rectangles}
% \useinnertheme{rounded}

% \useoutertheme{default}
% \useoutertheme{infolines}
% \useoutertheme{miniframes}
% \useoutertheme{shadow}
% \useoutertheme{sidebar}
% \useoutertheme{smoothbars}
% \useoutertheme{smoothtree}
% \useoutertheme{split}
% \useoutertheme{tree}



% Meta

\title[odeint]{Solving ODEs with CUDA and OpenCL}
\subtitle[odeint]{using Boost.Odeint}
\author[Karsten Ahnert]{Karsten Ahnert$^{1,2}$ and Mario Mulansky$^2$}
\institute[Universit\"at Potsdam]{$^1$ Ambrosys GmbH, Potsdam\\ $^2$ Institut f\"ur Physik und Astronomie, Universit\"at Potsdam}
\date{Februar 2, 2013}
%\logo{\pgfimage[width=2cm,height=2cm]{logo}}
\titlegraphic{\includegraphics[width=4cm]{ambrosys}\hspace{5ex}\includegraphics[width=1.5cm,height=1.5cm]{logo}\hspace{7ex}}
\subject{Subject}
\keywords{Keyword1,Keyword2}



\definecolor{dark-gray}{gray}{0.15}
\definecolor{light-gray}{gray}{0.8}
\definecolor{lighter-gray}{gray}{0.9}

\definecolor{dark-green}{rgb}{0,0.4,0}
\definecolor{dark-red}{rgb}{0.2,0,0}

\newcommand{\highlight}[1]{\bf #1}

\lstset{
         basicstyle=\small\ttfamily, % Standardschrift
         %numbers=left,               % Ort der Zeilennummern
         numberstyle=\tiny,          % Stil der Zeilennummern
         %stepnumber=2,               % Abstand zwischen den Zeilennummern
         numbersep=0pt,              % Abstand der Nummern zum Text
         tabsize=2,                  % Groesse von Tabs
         extendedchars=true,         %
         breaklines=true,            % Zeilen werden Umgebrochen
         frame=single,         
         backgroundcolor=\color{lighter-gray},
         tabsize=2,
         keywordstyle=\color{dark-green},
         identifierstyle=,
         commentstyle=\color{dark-gray}\normalfont\rmfamily\itshape,
         stringstyle=\color{dark-red},
         showspaces=false,           % Leerzeichen anzeigen ?
         showtabs=false,             % Tabs anzeigen ?
         xleftmargin=10pt,
         xrightmargin=10pt,
         framexleftmargin=5pt,
         framexrightmargin=5pt,
         framexbottommargin=4pt,
         language=c++,
         showstringspaces=false      % Leerzeichen in Strings anzeigen ?        
 }
\lstloadlanguages{C++}


% What is shown

\beamertemplatenavigationsymbolsempty
  \setbeamertemplate{footline}{}
%\setbeamertemplate{footline}{\insertframenumber}
\setbeamertemplate{headline}{}


\parindent0pt











\begin{document}



\frame{
  \titlepage
}

\rem{
\begin{frame}
  \heading{Outline}

  \tableofcontents
\end{frame}
}


\begin{frame}
 \heading{Introduction}

 \begin{itemize}
  \item Solve large systems of coupled ODEs
  \item Use odeint - Boost Library
  \item Compare several open source frameworks for GPGPU computation
  \item VexCL, ViennaCL, Thrust, MTL
 \end{itemize}

\end{frame}


\begin{frame}
 
\heading{What is an ODE? -- Examples}

\vspace{2ex}

\begin{minipage}{0.48\textwidth}
 \begin{center}
  Newtons equations

  \includegraphics[draft=false,width=0.8\textwidth]{solar_system.jpg}
 \end{center}
\end{minipage}
%\pause
\begin{minipage}{0.48\textwidth}
 \begin{center}
  Reaction and relaxation equations (i.e. blood alcohol content, chemical reaction rates)
 \end{center}
\end{minipage}
%\pause
\vspace{2ex}

\begin{minipage}{0.48\textwidth}
 \begin{center}
  Granular systems

  \includegraphics[draft=false,width=0.65\textwidth]{granular_system.png}
 \end{center}
\end{minipage}
%\pause
\begin{minipage}{0.48\textwidth}
 \begin{center}
  Interacting neurons

  \includegraphics[draft=false,width=0.6\textwidth]{neuron.jpg}
 \end{center}
\end{minipage}
%\pause
\vspace{2ex}

\begin{itemize}
 \item Many examples in physics, biology, chemistry, social sciences
 \item Fundamental in mathematical modelling
\end{itemize}

\end{frame}



\begin{frame}
 
 \heading{What is an ODE?}

 $$\frac{\de x(t)}{\de t} = f\big(x(t) , t\big) \qquad \qquad {\scriptsize \text{short form}} \qquad \dot{x} = f(x,t)
$$

 \begin{itemize}
  \item $x(t)$ -- dependent variable
  \item $t$ -- indenpendent variable (time)
  \item $f(x,t)$ -- defines the ODE
 \end{itemize}

\vspace{4ex}

 Initial Value Problem (IVP):

 $$\dot x = f( x , t ) ,\qquad x(t=0) = x_0$$

\end{frame}


\begin{frame}
  
 \heading{Numerical integration of ODEs}
  
\vspace{4ex}
    Find a numerical solution of an ODE and its IVP
    \[ \dot{x} = f(x,t) \,\,\textrm{,} \quad \quad x(t=0) = x_0\]

   \vspace{2ex}

   Example: Explicit Euler
   \[ x(t + \Delta t ) = x(t) + \Delta t \,\cdot\, f(x(t),t) + \mathcal{O}(\Delta t^2)\]

   \vspace{2ex}

   General scheme of order $s$
    \[ x(t) \,\, \mapsto \,\, x(t+\Delta t) \quad \quad \text{, or}\]
    \[x(t + \Delta t) = \mathcal{F}_t x(t) + \mathcal{O}(\Delta t^{s+1})\]

\end{frame}





\begin{frame}[fragile]

 \heading{Algebras and operations}

 \vspace{2ex}

Euler method

$$\text{for all i :}  \quad \quad x_i(t+\Delta t) = x_i(t) + \Delta t \cdot f_i(x)$$

\vspace{2ex}

\begin{lstlisting}
typedef euler< state_type ,
   value_type , deriv_type , time_type,
   algebra , operations , resizer > stepper; 
\end{lstlisting}


\begin{itemize}
\item Algebras perform the iteration over $i$.
\item Operations perform the elementary addition.
\end{itemize}

\vspace{2ex}

Usage:

\begin{lstlisting}
  stepper s;
  s.do_step( ode , x , t , dt );
\end{lstlisting}

\end{frame}













\begin{frame}[fragile]
 \heading{Algebras and operations}

\vspace{1ex}
Algebra has to have defined the following member functions:

\begin{itemize}
 \item \lstinline+algebra.for_each1( x1 , unary_operation );+
 \item \lstinline+algebra.for_each2( x1, x2, binary_operation );+
 \item ...
\end{itemize}

\vspace{2ex}

\lstinline+Operations+ is a class with the following (static) functors:
\begin{itemize}
 \item \lstinline+scale_sum1       // calculates y = a1*x1+
 \item \lstinline{scale_sum2       // calculates y = a1*x1 + a2*x2}
 \item ...
\end{itemize}

\vspace{2ex}
\begin{lstlisting}
algebra.for_each3( x1 , x0 , F1 ,
   Operations::scale_sum2( 1.0, b1*dt );
\end{lstlisting}

This computes: $\vec x_1 = 1.0\cdot \vec x_0 + b_1\Delta t\cdot \vec F_1$.
\end{frame}




\begin{frame}[fragile]
 \heading{Algebra and operations}

 \begin{itemize}
  \item {\tt range\_algebra} -- Default algebra, supporting Boost.Range
  \item {\tt default\_operations} -- Default operations
  \item {\tt vector\_space\_algebra} -- Types with vector space
    semantic, i.e. \lstinline{y = a1*x1 + a2*x2}. Can be used by all
    types supporting expression templates.
  \item {\tt thrust\_algebra}, {\tt thrust\_operations} -- Thrust's device vectors
 \end{itemize}

\end{frame}




\begin{frame}[fragile]
 \heading{GPU Frameworks}

\begin{itemize}
 \item VexCL - Vector Expression Framework, Sparse matrix support
 \item ViennaCL - Linear algebra framework - not restricted to OpenCL
 \item Thrust - general purpose algorithm library, mimicks the STL interface for CUDA devices
 \item MTL4 - Matrix template libary
\end{itemize}

\end{frame}



\begin{frame}[fragile]
 \heading{Example - Parameter study of Lorenz system}

\begin{eqnarray*}
\dot{x} & = & - \sigma ( y - x ) \\
\dot{y} & = & R x - y - x z \\
\dot{z} & = & - b z + x y
\end{eqnarray*}

Dependence of chaoticity on parameter $R$

\end{frame}


\begin{frame}[fragile]
 \heading{VexCL}

show code

\end{frame}



\begin{frame}[fragile]
 \heading{ViennaCL}

show code

\end{frame}




\begin{frame}[fragile]
 \heading{Thrust}

 show code
\end{frame}


\begin{frame}[fragile]
 \heading{MTL4}

 show code

\end{frame}


\begin{frame}[fragile]
 \heading{Performance}

 show picture
\end{frame}

\begin{frame}[fragile]
 \heading{Conclusion}

 \begin{itemize}
  \item Usability - they differ
  \item Performance - they are equal more or less
  \item Optimize by hand
 \end{itemize}

 Programming CUDA and OpenCL: A Case Study Using Modern C++ Libraries. Denis Demidov, Karsten Ahnert, Karl Rupp, Peter Gottschling. arXiv:1212.6326.

\end{frame}





\rem{
\input{introduction}

\input{tutorial}

%\input{technical_details}

\input{conclusion}

%\input{old_stuff}
}


\end{document}
